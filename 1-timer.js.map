{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict';\n\n// Імпорти бібліотек\n\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Оголошення змінних\n\nlet userDate;\nlet isActiveBtn = false;\nconst startBtn = document.querySelector('[data-start');\nconst days = document.querySelector('[data-days]');\nconst hour = document.querySelector('[data-hours]');\nconst minute = document.querySelector('[data-minutes]');\nconst second = document.querySelector('[data-seconds]');\nconst outTextTime = document.querySelector('.timer');\nlet countEndTime = 6;\n\n// Отримання дати від бібліотеки\n\nconst input = document.querySelector('#datetime-picker');\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userDate = selectedDates[0];\n    getUserDate();\n  },\n};\nconst date = flatpickr(input, options);\n\n//Обробка отриманої дати і активація кнопки старт\n\nfunction getUserDate() {\n  if (userDate.getTime() > Date.now() && isActiveBtn === false) {\n    startBtn.removeAttribute('disabled');\n    isActiveBtn = true;\n    iziToast.success({\n      theme: 'dark',\n      title: 'Start timer',\n      titleColor: '#fff',\n      backgroundColor: 'gren',\n      position: 'topRight',\n    });\n  } else if (userDate.getTime() <= Date.now() && isActiveBtn === true) {\n    startBtn.setAttribute('disabled', '');\n    isActiveBtn = false;\n    iziToast.warning({\n      theme: 'dark',\n      title: 'Error',\n      titleColor: '#fff',\n      message: 'Please choose a date in the future',\n      messageColor: '#fff',\n      backgroundColor: 'red',\n      position: 'topRight',\n    });\n  } else {\n    iziToast.warning({\n      theme: 'dark',\n      title: 'Error',\n      titleColor: '#fff',\n      message: 'Please choose a date in the future',\n      messageColor: '#fff',\n      backgroundColor: 'red',\n      position: 'topRight',\n    });\n  }\n}\n\n// Запуск таймера\n\nstartBtn.addEventListener('click', startTimer);\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n// Дефктивація кнопки та інпуту\n\nfunction startTimer() {\n  startBtn.setAttribute('disabled', '');\n  isActiveBtn = false;\n  input.setAttribute('disabled', '');\n\n  // Форматування дати з додаванням 0 на початок цифр 1-9\n\n  function convertDate(date) {\n    if (date === 0) {\n      return '00';\n    } else if (date > 0 && date < 10) {\n      return '0' + date;\n    } else {\n      return String(date);\n    }\n  }\n\n  // Виведення таймера на екран\n\n  const timer = setInterval(() => {\n    if (userDate.getTime() - Date.now() > 0) {\n      const outTime = convertMs(userDate.getTime() - Date.now());\n      days.textContent = convertDate(outTime.days);\n      hour.textContent = convertDate(outTime.hours);\n      minute.textContent = convertDate(outTime.minutes);\n      second.textContent = convertDate(outTime.seconds);\n    } else {\n      clearInterval(timer);\n      input.removeAttribute('disabled');\n      const timeOut = setInterval(() => {\n        if (countEndTime > 0) {\n          outTextTime.classList.toggle('time-out');\n          countEndTime--;\n        } else {\n          clearInterval(timeOut);\n          countEndTime = 6;\n        }\n      }, 600);\n    }\n  }, 1000);\n}\n"],"names":["userDate","isActiveBtn","startBtn","days","hour","minute","second","outTextTime","countEndTime","input","options","selectedDates","getUserDate","flatpickr","iziToast","startTimer","convertMs","ms","hours","minutes","seconds","convertDate","date","timer","outTime","timeOut"],"mappings":"0IAWA,IAAIA,EACAC,EAAc,GAClB,MAAMC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,gBAAgB,EAChDC,EAAS,SAAS,cAAc,gBAAgB,EAChDC,EAAc,SAAS,cAAc,QAAQ,EACnD,IAAIC,EAAe,EAInB,MAAMC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBX,EAAWW,EAAc,CAAC,EAC1BC,GACD,CACH,EACaC,EAAUJ,EAAOC,CAAO,EAIrC,SAASE,GAAc,CACjBZ,EAAS,UAAY,KAAK,IAAK,GAAIC,IAAgB,IACrDC,EAAS,gBAAgB,UAAU,EACnCD,EAAc,GACda,EAAS,QAAQ,CACf,MAAO,OACP,MAAO,cACP,WAAY,OACZ,gBAAiB,OACjB,SAAU,UAChB,CAAK,GACQd,EAAS,QAAS,GAAI,KAAK,IAAK,GAAIC,IAAgB,IAC7DC,EAAS,aAAa,WAAY,EAAE,EACpCD,EAAc,GACda,EAAS,QAAQ,CACf,MAAO,OACP,MAAO,QACP,WAAY,OACZ,QAAS,qCACT,aAAc,OACd,gBAAiB,MACjB,SAAU,UAChB,CAAK,GAEDA,EAAS,QAAQ,CACf,MAAO,OACP,MAAO,QACP,WAAY,OACZ,QAAS,qCACT,aAAc,OACd,gBAAiB,MACjB,SAAU,UAChB,CAAK,CAEL,CAIAZ,EAAS,iBAAiB,QAASa,CAAU,EAE7C,SAASC,EAAUC,EAAI,CAQrB,MAAMd,EAAO,KAAK,MAAMc,EAAK,KAAG,EAE1BC,EAAQ,KAAK,MAAOD,EAAK,MAAO,IAAI,EAEpCE,EAAU,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,EAEjDG,EAAU,KAAK,MAASH,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAd,EAAM,MAAAe,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAIA,SAASL,GAAa,CACpBb,EAAS,aAAa,WAAY,EAAE,EACpCD,EAAc,GACdQ,EAAM,aAAa,WAAY,EAAE,EAIjC,SAASY,EAAYC,EAAM,CACzB,OAAIA,IAAS,EACJ,KACEA,EAAO,GAAKA,EAAO,GACrB,IAAMA,EAEN,OAAOA,CAAI,CAErB,CAID,MAAMC,EAAQ,YAAY,IAAM,CAC9B,GAAIvB,EAAS,QAAS,EAAG,KAAK,IAAG,EAAK,EAAG,CACvC,MAAMwB,EAAUR,EAAUhB,EAAS,QAAO,EAAK,KAAK,IAAG,CAAE,EACzDG,EAAK,YAAckB,EAAYG,EAAQ,IAAI,EAC3CpB,EAAK,YAAciB,EAAYG,EAAQ,KAAK,EAC5CnB,EAAO,YAAcgB,EAAYG,EAAQ,OAAO,EAChDlB,EAAO,YAAce,EAAYG,EAAQ,OAAO,CACtD,KAAW,CACL,cAAcD,CAAK,EACnBd,EAAM,gBAAgB,UAAU,EAChC,MAAMgB,EAAU,YAAY,IAAM,CAC5BjB,EAAe,GACjBD,EAAY,UAAU,OAAO,UAAU,EACvCC,MAEA,cAAciB,CAAO,EACrBjB,EAAe,EAElB,EAAE,GAAG,CACP,CACF,EAAE,GAAI,CACT"}